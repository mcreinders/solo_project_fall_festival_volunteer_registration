var app=angular.module("locationApp",["ngRoute"]);app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/registrationPage.html"}).when("/newUserRegistration",{templateUrl:"views/newUserRegistration.html",controller:"newUserRegistrationController"}).when("/returningUserSignIn",{templateUrl:"views/returningUserSignIn.html",controller:"returningUserSignInController"}).when("/loginFailed",{templateUrl:"views/loginFailed.html"}).when("/volunteerRegistration",{templateUrl:"views/volunteerRegistration.html",controller:"volunteerRegistrationController"}).when("/coordinatorInformation",{templateUrl:"views/coordinatorInformation.html",controller:"coordinatorController"}).when("/duplicateUsername",{templateUrl:"views/duplicateUsername.html"}).when("/youSignedUpFor",{templateUrl:"views/youSignedUpFor.html",controller:"youSignedUpForController"}).when("/volunteerList",{templateUrl:"views/volunteerList.html",controller:"volunteerListController"}),b.html5Mode(!0)}]),app.controller("newUserRegistrationController",["$scope","$http","$location",function(a,b,c){a.show=!0,a.hide=!1,a.newUser={},a.registerUser=function(){b.post("/registerNewUser",a.newUser).then(function(a){"success"==a.data?c.path("returningUserSignIn"):c.path("duplicateUsername")})}}]),app.controller("returningUserSignInController",["$scope","$http","$location",function(a,b,c){a.returningUser={},a.sendSignIn=function(){b.post("/signIn",a.returningUser).then(function(d){"success"==d.data?b.post("/getUserInfo",a.returningUser).then(function(a){1==a.data.coordinator?c.path("coordinatorInformation"):c.path("volunteerRegistration")}):c.path("loginFailed")})}}]),app.controller("volunteerRegistrationController",["$scope","$http","$location",function(a,b,c){a.predicate="shift",a.reverse=!0,a.order=function(b){a.reverse=a.predicate===b?!a.reverse:!1,a.predicate=b},a.searchOpening="",a.availableArray=[];var d=function(){b.get("/getOpenings").then(function(b){for(var c=b.data,d=0;d<c.length;d++){var e=c[d].max_avail-c[d].users.length;e>0&&(a.availableArray[d]=c[d],a.availableArray[d].availOpenings=e)}})};d(),a.submitActivityID={},a.activitySelectedFunction=function(b){a.submitActivityID.id=b},a.activitySubmitFunction=function(){console.log("activity submit function",a.submitActivityID),b.post("/addVolunteer",a.submitActivityID).then(function(a){c.path("youSignedUpFor")})},a.goToSignedUpFor=function(){c.path("youSignedUpFor")}}]),app.controller("youSignedUpForController",["$scope","$http","$location",function(a,b,c){a.signedUpFor=[],a.firstName="";var d=function(){b.get("/getSignedUpFor").then(function(b){a.firstName=b.data.first_name;var c=b.data.activities;if(c.length>0)for(var d=0;d<c.length;d++){var e={activity:"",shiftTime:"",activityId:""};e.activity=c[d].activity_name,e.shiftTime=c[d].shift_time,e.activityId=c[d]._id,a.signedUpFor.push(e)}else e={activity:"You haven't selected any volunteer openings yet.",shiftTime:""},a.signedUpFor.push(e)})};d(),a.activityDeleteFunction=function(a){console.log("activity delete function",a)},a.goToVolunteerRegistration=function(){c.path("volunteerRegistration")}}]),app.controller("coordinatorController",["$scope","$http","$location",function(a,b,c){a.predicate="shift",a.reverse=!0,a.order=function(b){a.reverse=a.predicate===b?!a.reverse:!1,a.predicate=b},a.searchOpening="",a.availableArray=[];var d=function(){b.get("/getOpenings").then(function(b){for(var c=b.data,d=0;d<c.length;d++){a.availableArray[d]=c[d];var e=c[d].max_avail-c[d].users.length;a.availableArray[d].availOpenings=e,0==e?a.availableArray[d].filled="full":a.availableArray[d].filled="open"}})};d(),a.goToVolunteerList=function(){c.path("volunteerList")}}]),app.controller("volunteerListController",["$scope","$http","$location",function(a,b,c){a.predicate="shift",a.reverse=!0,a.order=function(b){a.reverse=a.predicate===b?!a.reverse:!1,a.predicate=b},a.searchVolunteers="";a.volunteerList=[];var d=function(){b.get("getAllUsers").then(function(b){console.log(b.data);for(var c=b.data,d=0;d<c.length;d++)if(c[d].activities.length>0){var e={name:"",contact:"",reminder:"",activities:[]};e.name=c[d].first_name+" "+c[d].last_name,"email"==c[d].contact_method?e.contact=c[d].contact_method+" "+c[d].email:"phonecall"==c[d].contact_method?e.contact=c[d].contact_method+" "+c[d].phone:"text"==c[d].contact_method&&(e.contact=c[d].contact_method+" "+c[d].phone),e.reminder=c[d].reminder;for(var f={activity_name:"",shift_time:""},g=0;g<c[d].activities.length;g++){var f={activity_name:"",shift_time:""};f.activity_name=c[d].activities[g].activity_name,f.shift_time=c[d].activities[g].shift_time,e.activities.push(f)}a.volunteerList.push(e),console.log("volunteer list",a.volunteerList)}})};d(),a.goToActivityList=function(){c.path("coordinatorInformation")}}]);